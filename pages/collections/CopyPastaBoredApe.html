<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE-edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>CopyPasta</title>
<style>

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

canvas {
   position:  absolute;
   top:  0;
   left: 0;
   object-fit: contain;
   
}

body {
  overflow:  hidden;
}


</style>

<body>

<script>

//Get Random Colour function
function getRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
              }
              return color;
            };

//Get Random RGBA function
function random_rgba() {
    var o = Math.round, r = Math.random, s = 255;
    return 'rgba(' + o(r()*s) + ',' + o(r()*s) + ',' + o(r()*s) + ',' + 0.1 + ')';
};  

//Get Random HSL function
function random_hsl() {
    
    return 'hsl(' + getRandomInt(0,255)+ ',' + 100 + '%' + ',' + getRandomInt(0,100) + '%)'
};  

//Random Integer function
function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1) + min);
          };           

//Create Main Canvas
var MainCanvas = document.createElement('canvas');
MainCanvas.width = 1100;
MainCanvas.height = 1100;
MainCanvas.style.width = '100vw';
MainCanvas.style.height = '100vh';
MainCanvas.style.zIndex = '-9999';
document.body.style.backgroundColor = random_rgba();
document.body.appendChild(MainCanvas);

//Get context of main canvas
var ctx = MainCanvas.getContext('2d');

//Copier
var my_gradient = ctx.createLinearGradient(0, 0, 0, 1100);
my_gradient.addColorStop(0, "dimgrey");
my_gradient.addColorStop(0.5, "white");
my_gradient.addColorStop(1, "dimgrey");

  //top bar
  ctx.fillStyle = 'darkgrey'//random_rgba();
  ctx.fillRect(0,0,1100,1100);

  //Copier bar
  ctx.fillStyle = 'black'
  ctx.fillRect(40,50,30,900);

  //Frame and bottom squares
  ctx.fillStyle = my_gradient;
  ctx.fillRect(70,10,1000,30);
  ctx.fillRect(70,1060,1000,30);
  ctx.fillRect(1050,10,30,1080);
  ctx.fillRect(620,970,200,80);
  

  //Keypad
  for (k=0; k<3; k++)
    for (l=0; l<4; l++){
      x = 480;
      y = 970;
      ctx.fillStyle = 'lightgrey'
      ctx.fillRect(x+ (k*40) ,y + (l*22),20,10);
    }

  //Copier button green
  ctx.arc(980,1005,50,0,2 * Math.PI, false);
  ctx.fillStyle = '#adcd82';
  ctx.fill()
  
  ctx.beginPath();
  ctx.moveTo(980,1010);
  ctx.lineTo(970,990);
  ctx.lineTo(980,970);
  ctx.lineTo(990,990);
  ctx.lineTo(980,1010);
  ctx.lineTo(980,980)
  ctx.strokeStyle = 'darkgreen'
  ctx.lineWidth = 2;
  ctx.stroke(); 

  //Copier button red
  ctx.beginPath();
  ctx.arc(880,1020,30,0,2 * Math.PI, false);
  ctx.fillStyle = '#eb8d63';
  ctx.fill()
  
  ctx.beginPath();
  ctx.fillStyle = 'lightgrey'
  ctx.font = '50px sans serif';
  ctx.fillText('c', 870,1030);

  //CopyPasta pfp
  ctx.fillRect(70,965,150,80);
  ctx.fillStyle = 'red';
  ctx.fill();
  
  ctx.beginPath();
  ctx.fillStyle = 'dimgrey'
  ctx.font = '50px sans serif';
  ctx.fillText('print', 100,1020);

//Monkey
class Monkey {
  constructor(x,y){
    this.x = x;
    this.y = y;
  }
  draw(context){
    
    ctx.lineWidth =  5;
    //Head Top
    ctx.beginPath();
    ctx.moveTo(x+10,y+5);
    ctx.bezierCurveTo(
      (x - 80), (y - 90),
      (x + 180), (y - 90),
      (x + 90), y+5);
    
    //Head Bottom
    ctx.moveTo(x+25,y+25);
    ctx.bezierCurveTo(
      (x - 50), (y + 130),
      (x + 160), (y + 130),
      (x + 75), y+25)

    ctx.moveTo(x+10,y+0);
    ctx.bezierCurveTo(
      (x - 50), (y + 150),
      (x + 160), (y + 150),
      (x + 90), y+0)

    //Mouth
    ctx.moveTo(x+25,y+80);
    ctx.quadraticCurveTo(
      x+50, (y+ getRandomInt(60,85)), 
      x + 75, y + 80)

    //Eye Left
    ctx.moveTo(x+25,y-10);
    ctx.quadraticCurveTo(
      x + 25, (y - getRandomInt(10,25)), 
      x + 40, y - 10)

    //Eye Right
    ctx.moveTo(x+60,y-10);
    ctx.quadraticCurveTo(
      x + 75, y - getRandomInt(10,25), 
      x + 75, y - 10) 
     
    //Hairline
    ctx.moveTo(x+20,y-0);
    ctx.quadraticCurveTo(
      x - 10, y - 40, 
      x + 40, y - 40);
    ctx.quadraticCurveTo(
      x + 50, y - 20, 
      x + 60, y - 40);
    ctx.quadraticCurveTo(
      x + 120, y - 40, 
      x + 80, y-0);
      ctx.stroke();

    //Nose
    ctx.moveTo(x+45,y+25);
    ctx.bezierCurveTo(
      (x + 40), (y - 15),
      (x -20), (y + 20),
      (x + 35), (y+25))
    ctx.moveTo(x+55,y+25);
    ctx.bezierCurveTo(
      (x + 60), (y - 15),
      (x + 120), (y + 20),
      (x + 65), y+25)
    ctx.stroke();

    //Ear Left
    ctx.beginPath();
    ctx.moveTo(x,y+40);
    ctx.bezierCurveTo(
      (x - 55), (y + 60),
      (x - 55), (y - 60),
      (x - 5), (y - 20))
    ctx.moveTo(x,y+20);
    ctx.bezierCurveTo(
      (x - 45), (y + 60),
      (x - 45), (y - 60),
      (x + 5), (y - 0))
   
    //Ear Right
    ctx.moveTo(x+105,y+40);
     ctx.bezierCurveTo(
      (x + 155), (y + 60),
      (x + 155), (y - 60),
      (x + 105), (y - 20))
  ctx.moveTo(x+100,y+20);
    ctx.bezierCurveTo(
      (x + 145), (y + 60),
      (x + 145), (y - 60),
      (x + 95), (y - 0))

    ctx.stroke();
  }
}

var colours = new Array (
'hsl(0, 100%, 50%)',   
'hsl(34, 100%, 59%)',   
'hsl(60, 100%, 63%)',   
'hsl(131, 100%, 25%)',   
'hsl(240, 100%, 49%)',
'hsl(304, 100%, 26%)'   
);
var x = 1000

function colourStrokeStyle(){
var defaultColourIndex = getRandomInt(0,5);
return colours[defaultColourIndex];
};

function monkey(){
  ctx.clearRect(70, 50, 970, 900);
  
  ctx.beginPath();
  ctx.fillStyle = 'dimgrey'
  ctx.fillRect(70,50,970,900);

for (i = 0; i < 4; i++)
  for (let j = 0; j < 4; j++){ 
    x = 170 + ( j * 220);
    y = 150 + (i * 220);
    ctx.strokeStyle = 'white'
    //console.log(ctx.strokeStyle);
    var monkey = new Monkey(x,y);
    monkey.draw(ctx); 
}};

monkey();
//window.setInterval(monkey, 1000); 

function copier(){
    var x = 850
    window.requestAnimationFrame(function animate() {
    x -= getRandomInt(5,8);
    ctx.beginPath();
    ctx.fillStyle = 'rgba(0, 0, 0, 0.03)';
    ctx.fillRect(20+x, 50, 160, 900);
          if (x < 50){
              monkey();
              x += 800;
          } else {
              x += 0;
              }
                reqAnim = window.requestAnimationFrame(animate);
                }); 
}

//Event Listener for Click
      MainCanvas.addEventListener(
        "click", 
        function (event) {
          var element = event.currentTarget;
          element.clicks = (element.clicks || 1) //+ 1;
          console.log(element.clicks);   
         

          ww=window.innerWidth;
          wh=window.innerHeight;
          mind=Math.min(ww,wh)//-100;
          sf=1100/mind;

          xclick=(sf*(event.clientX-(ww-mind)/2))|0;
          yclick=(sf*(event.clientY-(wh-mind)/2))|0;
          console.log(xclick, yclick); 

          if(element.clicks <= 1 && xclick > 930 && xclick < 1030 && yclick > 960 && yclick < 1060){
            copier()  
            element.clicks += 1;
            }
            else if(xclick > 850 && xclick < 910 && yclick > 990 && yclick < 1050){
             window.cancelAnimationFrame(reqAnim);
             ctx.clearRect(70, 50, 970, 900);
             monkey();
             element.clicks = 0;
            }
            else if(xclick > 70 && xclick < 220 && yclick > 965 && yclick < 1045){
              pfpGenerator();
              element.clicks = 0;
            };
        },
        {once:false}
      );

/* MainCanvas.addEventListener(
        "click", 
        function (event) {
            if(xclick > 70 && xclick < 220 && yclick > 965 && yclick < 1045){
            pfpGenerator();
        }}); */

function pfpGenerator(){

//Make a Canvas to copy the data you would like to download to
var hidden_canv = document.createElement('canvas');
hidden_canv.style.display = 'none';
document.body.appendChild(hidden_canv);
hidden_canv.width = 2000;
hidden_canv.height = 2000;

//Draw the data you want to download to the hidden canvas
var hidden_ctx = hidden_canv.getContext('2d');

hidden_ctx.drawImage(
    MainCanvas, 
    95,//Start Clipping
    50,//Start Clipping
    250,//Clipping Width
    250,//Clipping Height
    0,//Place X
    0,//Place Y
    hidden_canv.width,//Place Width
    hidden_canv.height//Place Height
    );

//Create a download URL for the data
var hidden_data = hidden_canv.toDataURL({ pixelRatio: 2}).replace({ pixelRatio: 2}, "image/octet-stream"); 

//Download the pfp
var downloadAnchor = document.createElement('a');
downloadAnchor.setAttribute('download', 'CopyPastaPfp.png');
downloadAnchor.setAttribute('href', hidden_data);
downloadAnchor.click();
} 






</script>

</body>
</html>
